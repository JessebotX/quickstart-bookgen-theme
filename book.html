<!DOCTYPE html>
<html lang="{{ .LanguageCode }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="../style.css">

    <title>{{ .Title }}</title>
  </head>

  <body>
    <header class="book-header">
      <nav class="book-header-nav" aria-label="Site menu">
        <a href="../index.html" class="book-header-nav-item">‚Üê Home</a>
      </nav>
      <h1 class="book-header-heading">{{ .Title }}</h1>
    </header>

    <main class="book-main">
      <aside class="book-main-aside">
        {{ with .CoverPath -}}
        <img class="book-main-aside-cover" src="{{ . }}" alt="Cover for {{ $.Title }}">
        {{- else -}}
        <img class="book-main-aside-cover" src="../theme/cover-placeholder.png" alt="Cover for {{ $.Title }}">
        {{- end }}

        {{ with .ShortDescription -}}
        <p class="book-main-aside-desc">{{ . }}</p>
        {{- end }}

        {{ with .Genre -}}
        <section class="book-main-aside-section book-main-aside-section--genre">
          <ul class="book-main-aside-section-genre-list">
            {{ range . -}}
            <li class="book-main-aside-section-genre-list-item">
              {{ . }}
            </li>
            {{- end }}
          </ul>
        </section>
        {{- end }}

        <section class="book-main-aside-section">
          <ul class="book-main-aside-section-stats">
            {{ with .Status -}}
            <li class="book-main-aside-section-stats-item">
              <svg xmlns="http://www.w3.org/2000/svg" class="book-main-aside-section-stats-item-icon" viewBox="0 0 512 512">
                <!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                <path d="M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z">
              </svg>
              {{ . }}
            </li>
            {{- end }}
            <li class="book-main-aside-section-stats-item">
              <svg xmlns="http://www.w3.org/2000/svg" class="book-main-aside-section-stats-item-icon" viewBox="0 0 384 512">
                <!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                <path d="M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z">
              </svg>
              {{ len .Chapters }} Chapters
            </li>
          </ul>
        </section>

        <section class="book-main-aside-section book-main-aside-section--downloads">
          <a href="rss.xml" class="book-main-aside-section-link">
            <svg xmlns="http://www.w3.org/2000/svg" class="book-main-aside-section-link-icon" viewBox="0 0 448 512">
              <!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
              <path d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z">
            </svg>
            RSS
          </a>
          <a href="{{ .ID }}.epub" class="book-main-aside-section-link">
            <svg xmlns="http://www.w3.org/2000/svg" class="book-main-aside-section-link-icon" viewBox="0 0 384 512">
              <!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
              <path d="M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM216 232V334.1l31-31c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-72 72c-9.4 9.4-24.6 9.4-33.9 0l-72-72c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l31 31V232c0-13.3 10.7-24 24-24s24 10.7 24 24z">
            </svg>
            EPUB
          </a>
        </section>

        {{ with .Author -}}
        <section class="book-main-aside-section book-main-aside-section--author">
          {{ with .Name -}}
          <h3 class="book-main-aside-section-author-heading">
            Author:
            <span class="book-main-aside-section-author-heading-name">{{ . }}</span>
          </h3>
          {{- end }}

          {{ with .Bio -}}
          <p class="book-main-aside-section-author-bio">{{ . }}</p>
          {{- end }}
        </section>
        {{- end }}
      </aside>

      <section class="book-main-content">
        <section class="book-main-content-section book-main-content-section--blurb">
          <h2 class="book-main-content-section-heading">About</h2>
          {{ .Blurb }}
        </section>

        <nav class="book-main-content-section book-main-content-section--nav" aria-label="Table of contents for {{ .Title }}">
          <ol class="book-main-content-section-nav">
            {{ range .Chapters -}}
            <li class="book-main-content-section-nav-item">
              <h3 class="book-main-content-section-nav-item-heading">
                <a class="book-main-content-section-nav-item-heading-link"
                   href="{{ .SlugHTML }}">
                  {{ .Title }}
                </a>
              </h3>

              {{ if not (and .Published.IsZero .LastModified.IsZero) }}
              <ul class="book-main-content-section-nav-item-stats">
                {{ if not .Published.IsZero -}}
                <li class="book-main-content-section-nav-item-stats-item book-main-content-section-nav-item-stats-item--published">
                  {{ .Published.Format "Jan 2, 2006 @ 3:04 PM (PST)" }}
                </li>
                {{- end }}

                {{ if not .LastModified.IsZero -}}
                <li class="book-main-content-section-nav-item-stats-item book-main-content-section-nav-item-stats-item--lastmod">
                  Last Modified
                  {{ .LastModified.Format "Jan 2, 2006 @ 3:04 PM" }}
                </li>
                {{- end }}
              </ul>
              {{- end }}

              {{ with .Description -}}
              <p class="book-main-content-section-nav-item-desc">{{ . }}</p>
              {{- end }}
            </li>
            {{- end }}
          </ol>
        </nav>
      </section>
    </main>
  </body>
</html>
